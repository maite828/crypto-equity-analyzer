services:
  analyzer:
    build: .
    image: cryptopredicction:latest
    environment:
      LOG_LEVEL: "INFO"
      FMP_API_KEY: "rpMcNVklPvOw4jr0098cjnStaeJMUGwc"
      # TEXTS: "Un titular||Otro titular"
      # SYMBOL: "ETH-USD"
      # HF_TOKEN: "hf_xxx" # SÃ³lo si el repo de Hugging Face es privado
    volumes:
      - ./assets:/app/assets
      - ./configs:/app/configs
      - ./models:/app/models
      - ./data:/app/data
      - ./outputs:/app/outputs
      - ./dashboard:/app/dashboard
      - ./scripts:/app/scripts
    entrypoint: ["python", "-m", "streamlit", "run", "dashboard/app.py"]

  pipeline:
    build: .
    image: cryptopredicction:latest
    environment:
      LOG_LEVEL: "INFO"
      FMP_API_KEY: "rpMcNVklPvOw4jr0098cjnStaeJMUGwc"
    volumes:
      - ./assets:/app/assets
      - ./configs:/app/configs
      - ./models:/app/models
      - ./data:/app/data
      - ./outputs:/app/outputs
      - ./reports:/app/reports
      - ./scripts:/app/scripts
    entrypoint:
      - python
      - scripts/run_pipeline.py
      - --intervals
      - 15m
      - --days
      - "1"
